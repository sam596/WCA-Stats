The SQL files required to update these stats.

|Table|File|SQL|Notes|
|--|--|--|--|
|Best 3x3 Average without a Sub-X Single|`bestaveragewithoutsubxsingle.md`|`SELECT CONCAT("[",p.name,"](https://www.worldcubeassociation.org/persons/",a.personId,")") name, p.countryId, (SELECT best FROM rankssingle WHERE eventId = '333' AND personId = a.personId) single, a.best average FROM ranksaverage a INNER JOIN persons p ON p.subid = 1 AND a.personId = p.id WHERE a.eventId = '333' AND personId NOT IN (SELECT personId FROM rankssingle WHERE eventId = '333' AND best < 600) ORDER BY average ASC LIMIT 25;`|Change `best < 600` to value for each table|
|Highest Percentage of Best Solves occurring on the Final Solve of an Average|`mostbestaslastsolve.md`|`SELECT CONCAT("[",personname,"](https://www.worldcubeassociation.org/persons/",personId,")") name, countryId, rounds, bestonlast, ROUND(bestonlast/rounds*100,2) percent FROM (SELECT personId, personName, countryId, COUNT(*) rounds, COUNT(CASE WHEN value5 > 0 AND value5 < value1 AND value5 < value2 AND value5 < value3 AND value5 < value4 THEN 1 END) bestonlast FROM wca_dev.results GROUP BY personId HAVING COUNT(*) >= 100) a ORDER BY percent DESC LIMIT 50;`|Change 100 to value required for each table (takes 20 secs for each table)|
|Longest PB Streak|`pbstreakincfmc.md`|`SELECT CONCAT("[",p.name,"](https://www.worldcubeassociation.org/persons/",a.personId,")"), a.pbStreak, CONCAT("[",a.startcomp,"](https://www.worldcubeassociation.org/competitions/",a.startcomp,")"), IF((SELECT id FROM pb_streak WHERE personId = a.personId AND endcomp = a.endComp)=(SELECT MAX(id) FROM pb_streak WHERE personId = a.personId),"",CONCAT("[",a.endcomp,"](https://www.worldcubeassociation.org/competitions/",a.endcomp,")" )) FROM pb_streak a INNER JOIN (SELECT personId, startcomp, MAX(pbStreak) maxpbs FROM pb_streak GROUP BY personId, startcomp) b ON a.personId = b.personId and a.startcomp = b.startcomp and b.maxpbs = a.pbstreak JOIN wca_dev.persons p ON a.personId = p.id ORDER BY a.pbStreak DESC LIMIT 100;`|(about 45 secs)|
|Longest PB Streak excluding FMC Only Competitions|`pbstreakexcfmc.md`|`SELECT CONCAT("[",p.name,"](https://www.worldcubeassociation.org/persons/",a.personId,")"), a.pbStreak, CONCAT("[",a.startcomp,"](https://www.worldcubeassociation.org/competitions/",a.startcomp,")"), IF((SELECT id FROM pb_streak_exfmc WHERE personId = a.personId AND endcomp = a.endComp)=(SELECT MAX(id) FROM pb_streak_exfmc WHERE personId = a.personId),"",CONCAT("[",a.endcomp,"](https://www.worldcubeassociation.org/competitions/",a.endcomp,")" )) FROM pb_streak_exfmc a INNER JOIN (SELECT personId, startcomp, MAX(pbStreak) maxpbs FROM pb_streak_exfmc GROUP BY personId, startcomp) b ON a.personId = b.personId and a.startcomp = b.startcomp and b.maxpbs = a.pbstreak JOIN wca_dev.persons p ON a.personId = p.id ORDER BY a.pbStreak DESC LIMIT 100;`|(about 45 secs)|
|Most Consecutive Months Competed in|`monthstreaks.md`|`SELECT CONCAT("[",name,"](https://www.worldcubeassociation.org/persons/",personId,")") Name, countryId Country, months MonthStreak FROM monthsbyperson ORDER BY months DESC LIMIT 100;`|Requires `/queries/monthstreaks.sql` (takes 3-4 hours)|
|Most Sub-X 3x3 Solves without a Sub-X average|`subxsinglewithoutxaverage.md`|`SELECT CONCAT("[",personname,"](https://www.worldcubeassociation.org/persons/",personId,")"), COUNT(*) subx, (SELECT ROUND(best/100,2) FROM wca_dev.ranksaverage WHERE personId = a.personId AND eventId = '333') avg FROM wca_stats.all_single_results a WHERE value > 0 AND value < 1000 AND eventId = '333' AND personId NOT IN (SELECT personId FROM wca_dev.ranksaverage WHERE eventId = '333' AND best < 1000) GROUP BY personId ORDER BY COUNT(*) DESC LIMIT 25;`|Change `best < 1000` and `value < 1000` to value for each X value (takes <2 secs for each table)|
|Sum of Best Times at a Competition|`sumbesttimes.md`|`SELECT CONCAT("[",competitionId,"](https://www.worldcubeassociation.org/competitions/",competitionId,")") competitionId, (SELECT countryId FROM competitions WHERE id = a.competitionId) country, LEFT(TIME_FORMAT(SEC_TO_TIME(SUM(best)/100),"%i:%s.%f"),8) `sum` FROM (SELECT competitionId, eventId, MIN(best) best FROM results WHERE competitionId IN (SELECT competitionId FROM results WHERE eventId IN ('333','222','444','555','666','777','333oh','333bf','333ft','clock','skewb','pyram','minx','sq1','444bf','555bf') AND best > 0 GROUP BY competitionId HAVING COUNT(DISTINCT eventId) = 16) AND best > 0 AND eventId NOT IN ('333mbf','333fm') GROUP BY competitionId, eventId) a GROUP BY competitionId ORDER BY SUM(best) ASC LIMIT 100;`|(takes about 12 secs)|
